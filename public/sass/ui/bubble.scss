// bubble
// author liw
// =======================================
// required: _css3.scss, _global.scss

// import
@import "../include/_global.scss";
@import "../include/_css3.scss";

// variables
$poptipBaseClass: poptip !default;
$poptipArrowClass: arrow !default;

//poptip state class
//         poptipClassName, backgroundColor, borderColor, arrowClassName, positionY, positionX, marginTop, marginLeft
$popInfo:  info             #edf4fa          #c7dbeb      top             -16px      20px       -7px       -8px;
$popSucc:  succ             #ebf9df          #bed7a8      right           20px       -16px      -8px       -9px;
$popError: error            #faedee          #fad2cd      bottom          -16px      20px       -9px       -8px;
$popWarn:  warn             #fcf5e3          #e8d4a8      left            20px       -16px      -8px       -7px;
$poptipGroup: $popInfo, $popSucc, $popError, $popWarn !default;


// tip pop style
.#{$tipBaseClass}-pop{
    position: absolute;
    i{
        position: absolute;
        @if $ie6{_left: 30px; }
    }
    p{
        @if $ie6{_float: left; }
    }
}

/************************* poptip style *************************/
.#{$poptipBaseClass}{
    padding: 5px 20px 5px 10px;
    font-size: 12px;
    background: #fff;
    border: 1px solid #d9d9d9;
    position: absolute;
    .#{$poptipBaseClass}-close{
        color: #999;
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
        &:hover{color: #666;}
    }
}

/* poptip arrow style */
.#{$poptipBaseClass}{
    .#{$poptipArrowClass}{
        width: 0px;
        height: 0px;
        line-height: 0;
        font-size: 0;
        border: 8px dashed transparent;
        position: absolute;
        zoom: 1;
    }
    @each $arrowItem in $poptipGroup{
        $arrowBorderStyle: 8px solid transparent;
        $arrowPositionClass: nth($arrowItem,4);
        $arrowPositionY: nth($arrowItem,5);
        $arrowPositionX: nth($arrowItem,6);
        $arrowMarginTop: nth($arrowItem,7);
        $arrowMarginLeft: nth($arrowItem,8);

        $arrowClass: unquote('arrow-'+$arrowPositionClass);

        .#{$arrowClass}{
            @if $arrowClass == 'arrow-top'{
                border-bottom:  $arrowBorderStyle;
                top: $arrowPositionY;
                left: $arrowPositionX;
                .#{$poptipArrowClass}-in{border-bottom: $arrowBorderStyle;}
            }
            @else if $arrowClass == 'arrow-right'{
                border-left: $arrowBorderStyle;
                top: $arrowPositionY;
                right: $arrowPositionX;
                .#{$poptipArrowClass}-in{border-left: $arrowBorderStyle;}
                @if $ie6{_right: -17px;}
            }
            @else if $arrowClass == 'arrow-bottom'{
                border-top: $arrowBorderStyle;
                bottom: $arrowPositionY;
                left: $arrowPositionX;
                .#{$poptipArrowClass}-in{border-top: $arrowBorderStyle;}
            }
            @else if $arrowClass == 'arrow-left'{
                border-right: $arrowBorderStyle;
                top: $arrowPositionY;
                left: $arrowPositionX;
                .#{$poptipArrowClass}-in{border-left: $arrowBorderStyle;}
            }
            .#{$poptipArrowClass}-in{
                margin-top: $arrowMarginTop;
                margin-left: $arrowMarginLeft;
            }
        }
    }
}

/* poptip state style */
@each $poptipItem in $poptipGroup{
    $stateClass: nth($poptipItem,1);
    $backgroundColor: nth($poptipItem,2);
    $borderColor: nth($poptipItem,3);

    $poptipClass: unquote('poptip-'+$stateClass);

    .#{$poptipClass}{
        border: 1px solid $borderColor;
        background-color: $backgroundColor;
        @each $arrowItem in $poptipGroup{

            $arrowPositionClass: nth($arrowItem,4);
            $arrowClass: unquote('arrow-'+$arrowPositionClass);

            .#{$arrowClass}{
                @if $arrowClass == 'arrow-top'{
                    border-bottom-color:  $borderColor;
                    .#{$poptipArrowClass}-in{border-bottom-color: $backgroundColor;}
                }
                @else if $arrowClass == 'arrow-right'{
                    border-left-color: $borderColor;
                    .#{$poptipArrowClass}-in{border-left-color: $backgroundColor;}
                }
                @else if $arrowClass == 'arrow-bottom'{
                    border-top-color: $borderColor;
                    .#{$poptipArrowClass}-in{border-top-color: $backgroundColor;}
                }
                @else if $arrowClass == 'arrow-left'{
                    border-right-color: $borderColor;
                    .#{$poptipArrowClass}-in{border-right-color: $backgroundColor;}
                }
            }
        }
    }
}